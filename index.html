<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">

    <!-- Font awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css">

    <link rel="stylesheet" href="style.css">
    <title href="/">Macha Recipes</title>
  </head>
  <body>
    <!-- Main container -->
    <div class="container main-container">
      <!-- Navigation bar -->
      <nav class="navbar navbar-expand bg-dark">
        <ul class="navbar-nav ml-auto">
          <li class="nav-item p-2" id="recipes-nav">Recipes</li>
          <li class="nav-item p-2" id="add-recipe-nav">Add recipe</li>
        </ul>
      </nav>

      <!-- Status -->
      <div class="alert alert-success" id="status-success" role="alert" align="center">
      </div>
      <div class="alert alert-danger" id="status-failed" role="alert" align="center">
      </div>

      <!-- Search bar -->
      <form id="search-recipes">
        <div class="p-3 w-50 rounded mx-auto">
          <div class="input-group">
            <input type="search" placeholder="Search for a recipe..." class="form-control">
            <div class="input-group-append">
              <button type="submit" class="btn btn-link"><i class="fa fa-search"></i></button>
            </div>
          </div>
        </div>
      </form>

      <!-- Recipe List -->
      <div class="container mt-5" id="recipes" align="center">
      </div>

      <!-- Single Recipe Page -->
      <div class="container mt-5" id="single-recipe" align="left">
        <h1 id="recipe-name-show"></h1>
        <h5 id="servings-show"></h5>
        <p id="description-show"></p>
        <div class="row mt-3">
          <div class="col-4">
            <h5>Ingredients</h5>
          </div>
          <div class="col-8">
            <h5 class="ml-3">Instructions</h5>
          </div>
        </div>
        
        <div class="row">
          <div class="col-4">
            <table class="table">
              <tbody id="ingredients-list-show">
              </tbody>
            </table>
          </div>

          <div class="col-8" id="instructions-list-show">
          </div>
        </div>
        <div class="form-group w-75" id="edit-recipe-button" align="right"></div>
      </div>

      <!-- Add or edit Recipe -->
      <div class="container mt-5" id="add-or-edit-recipe" align="center">
        <form>
          <!-- Recipe Name -->
          <div class="form-group col-md-12" align="left">
            <label for="recipe-name-input">Recipe Name</label>
            <input class="form-control" id="recipe-name-input" placeholder="Enter recipe name">
          </div>

          <!-- Servings -->
          <div align="left">
            <div class="form-group col-md-3" align="left">
              <label for="servings-input">Servings</label>
              <input type="number" class="form-control" id="servings-input" placeholder="Enter number of servings"></input>
            </div>
        </div>

          <!-- Description -->
          <div class="form-group col-md-12" align="left">
            <label for="recipe-description-input">Description</label>
            <textarea class="form-control" id="recipe-description-input" rows="3" placeholder="Enter description"></textarea>
          </div>

          <!-- Ingredients -->
          <div class="w-75" align="left" id=ingredient-list>
            <div class="form-row flex-nowrap">
              <div class="form-group col-md-7">
                <label for="ingredients-input">Ingredient</label>
                <input class="form-control ingredients-input">
              </div>
              <div class="form-group col-md-2">
                <label for="amount-input">Amount</label>
                <input type="number" class="form-control amount-input">
                </input>
              </div>
              <div class="form-group col-md-2">
                <label for="units-input">Unit</label>
                <input list="unitList" class="form-control units-input">
                </input>
              </div>
            </div>
            <div class="form-row flex-nowrap">
              <div class="form-group col-md-7">
                <input class="form-control" readonly>
              </div>
              <div class="form-group col-md-2">
                <input class="form-control" readonly>
                </input>
              </div>
              <div class="form-group col-md-2">
                <input class="form-control" readonly>
                </input>
              </div>
              <div class="form-group col-md-1">
                <button type="submit" id="addIngredientButton" class="btn btn-primary w-100">+</button>
              </div>
            </div>
          </div>

          <!-- Instructions -->
          <div class="w-75" align="left" id=instruction-list>
            <label for="instruction-input">Instructions</label>
            <div class="form-row align-items-end flex-nowrap">
              <div class="form-group col-md-1 align-self-center" align="center">
                <span class="instruction-step">1.</span>
              </div>
              <div class="form-group col-md-9">
                <textarea class="form-control instruction-input" rows="2"></textarea>
              </div>
            </div>
            <div class="form-row align-items-end flex-nowrap">
              <div class="form-group col-md-1 align-self-center" align="center">
                <span id="read-only-instruction-number">2.</span>
              </div>
              <div class="form-group col-md-9">
                <textarea class="form-control" rows="2" readonly></textarea>
              </div>
              <div class="form-group col-md-1">
                <button type="submit" id="addInstructionButton" class="btn btn-primary w-100">+</button>
              </div>
            </div>
          </div>

          <!-- Submit, this can be add or edit -->
          <div id="submit-recipe-button-div" align="right">
          </div>

        </form>
      </div>
    </div>
    <script type="text/javascript">
      // Single Page Apps for GitHub Pages
      // https://github.com/rafrex/spa-github-pages
      // Copyright (c) 2016 Rafael Pedicini, licensed under the MIT License
      // ----------------------------------------------------------------------
      // This script checks to see if a redirect is present in the query string
      // and converts it back into the correct url and adds it to the
      // browser's history using window.history.replaceState(...),
      // which won't cause the browser to attempt to load the new url.
      // When the single page app is loaded further down in this file,
      // the correct url will be waiting in the browser's history for
      // the single page app to route accordingly.
      (function(l) {
        if (l.search) {
          var q = {};
          l.search.slice(1).split('&').forEach(function(v) {
            var a = v.split('=');
            q[a[0]] = a.slice(1).join('=').replace(/~and~/g, '&');
          });
          if (q.p !== undefined) {
            window.history.replaceState(null, null,
              l.pathname.slice(0, -1) + (q.p || '') +
              (q.q ? ('?' + q.q) : '') +
              l.hash
            );
          }
        }
      }(window.location))
    </script>

    <script src="cookbook_handler.js"></script>
    <script src="ui.js"></script>
    <script src="app.js"></script>
  </body>
</html>

<datalist id=unitList>
  <option value="g"></option>
  <option value="dl"></option>
</datalist>